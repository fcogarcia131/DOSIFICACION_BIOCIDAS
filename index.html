<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora de Dosis de Biocidas</title>

<style>
body {
    font-family: Arial, sans-serif;
    background-color: #f4f6f8;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.container {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    width: 420px;
}

button {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 6px;
    background-color: #007bff;
    color: white;
    font-size: 16px;
    cursor: pointer;
    margin-bottom: 10px;
}

button:hover { background-color: #0056b3; }

.boton-secundario { background-color: #28a745; }
.boton-secundario:hover { background-color: #1e7e34; }

.boton-volver { background-color: #6c757d; }
.boton-volver:hover { background-color: #5a6268; }

label { font-weight: bold; }

select, input {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    margin-bottom: 15px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

.resultado {
    margin-top: 20px;
    padding: 15px;
    background-color: #e9f7ef;
    border-radius: 6px;
    font-weight: bold;
    text-align: center;
}
small {
    font-weight: normal;
}
</style>
</head>

<body>

<div class="container" id="menu">
    <h2>Calculadora de Dosis de Biocidas</h2>
    <button onclick="cargarDesinfeccion()">Desinfección de Agua (Legionella)</button>
    <button class="boton-secundario" onclick="cargarInsecticidas()">Dosificación de Insecticidas</button>
    <button onclick="cargarVectobac()">Dosificación Vectobac 12 AS</button>
</div>

<div class="container" id="contenido" style="display:none;"></div>

<script>

function volverMenu() {
    document.getElementById("contenido").style.display = "none";
    document.getElementById("menu").style.display = "block";
}

/* =========================
   DESINFECCIÓN AGUA
========================= */

function cargarDesinfeccion() {
    document.getElementById("menu").style.display = "none";
    document.getElementById("contenido").style.display = "block";
    document.getElementById("contenido").innerHTML = `
        <h2>Desinfección de Agua</h2>
        <label>Seleccionar Biocida:</label>
        <select id="biocida">
            <option value="576000">Peróxido Hidrógeno 48% - 576000 ppm</option>
            <option value="187500">Hipoclorito 15% - 187500 ppm</option>
            <option value="162500">Hipoclorito 13% - 162500 ppm</option>
            <option value="300000">Peróxido 25% - 300000 ppm</option>
        </select>
        <label>Concentración Deseada (ppm):</label>
        <input type="number" id="dosis">
        <label>Volumen Sistema (L):</label>
        <input type="number" id="volumen">
        <button onclick="calcularAgua()">Calcular</button>
        <button class="boton-volver" onclick="volverMenu()">Volver</button>
        <div id="resultado" class="resultado" style="display:none;"></div>
    `;
}

function calcularAgua() {
    const concentracion = parseFloat(document.getElementById("biocida").value);
    const dosis = parseFloat(document.getElementById("dosis").value);
    const volumen = parseFloat(document.getElementById("volumen").value);

    if (isNaN(dosis) || isNaN(volumen)) {
        alert("Complete todos los campos.");
        return;
    }

    const litros = (dosis * volumen) / concentracion;
    const ml = litros * 1000;

    const resultado = document.getElementById("resultado");
    resultado.style.display = "block";
    resultado.innerHTML = `
        Volumen a añadir:<br><br>
        ${litros.toFixed(4)} L<br>
        ${ml.toFixed(2)} mL
    `;
}

/* =========================
   INSECTICIDAS
========================= */

function cargarInsecticidas() {
    document.getElementById("menu").style.display = "none";
    document.getElementById("contenido").style.display = "block";
    document.getElementById("contenido").innerHTML = `
        <h2>Dosificación de Insecticidas</h2>
        <label>Nombre producto:</label>
        <input type="text" id="nombre">
        <label>Concentración garrafa (%):</label>
        <input type="number" id="concentracion">
        <label>Volumen caldo (L):</label>
        <input type="number" id="volumenCaldo">
        <label>Dosis deseada (%):</label>
        <input type="number" id="dosis">
        <button onclick="calcularInsecticida()">Calcular</button>
        <button class="boton-volver" onclick="volverMenu()">Volver</button>
        <div id="resultado" class="resultado" style="display:none;"></div>
    `;
}

function calcularInsecticida() {
    const nombre = document.getElementById("nombre").value;
    const concentracion = parseFloat(document.getElementById("concentracion").value);
    const volumen = parseFloat(document.getElementById("volumenCaldo").value);
    const dosis = parseFloat(document.getElementById("dosis").value);

    if (!nombre || isNaN(concentracion) || isNaN(volumen) || isNaN(dosis)) {
        alert("Complete todos los campos.");
        return;
    }

    const litros = (dosis * volumen) / concentracion;
    const ml = litros * 1000;

    const resultado = document.getElementById("resultado");
    resultado.style.display = "block";
    resultado.innerHTML = `
        Producto: ${nombre}<br><br>
        Volumen a añadir:<br><br>
        ${litros.toFixed(4)} L<br>
        ${ml.toFixed(2)} mL
    `;
}

/* =========================
   VECTOBAC 12 AS
========================= */

function cargarVectobac() {
    document.getElementById("menu").style.display = "none";
    document.getElementById("contenido").style.display = "block";
    document.getElementById("contenido").innerHTML = `
        <h2>Vectobac 12 AS</h2>
        <label>Superficie (m²):</label>
        <input type="number" id="superficie">
        <label>Nivel infestación:</label>
        <select id="nivel">
            <option value="baja">Baja</option>
            <option value="media">Media</option>
            <option value="alta">Alta</option>
        </select>
        <label>Volumen aplicación (L/ha):</label>
        <select id="volHa">
            <option value="300">Lámina limpia (300 L/ha)</option>
            <option value="600">Vegetación media (600 L/ha)</option>
            <option value="900">Vegetación densa (900 L/ha)</option>
        </select>
        <button onclick="calcularVectobac()">Calcular</button>
        <button class="boton-volver" onclick="volverMenu()">Volver</button>
        <div id="resultado" class="resultado" style="display:none;"></div>
    `;
}

function calcularVectobac() {
    const superficie = parseFloat(document.getElementById("superficie").value);
    const nivel = document.getElementById("nivel").value;
    const volHa = parseFloat(document.getElementById("volHa").value);

    if (isNaN(superficie)) {
        alert("Introduzca la superficie.");
        return;
    }

    const rangos = {
        baja: 0.08,
        media: 0.125,
        alta: 0.175
    };

    const dosis = rangos[nivel];
    const producto = superficie * dosis;
    const caldo = superficie * (volHa / 10000);
    const concentracion = producto / caldo;

    const resultado = document.getElementById("resultado");
    resultado.style.display = "block";
    resultado.innerHTML = `
        <strong>RESULTADO</strong><br><br>
        Dosis aplicada: ${dosis.toFixed(3)} ml/m²<br>
        Producto total: ${producto.toFixed(2)} ml<br>
        Caldo necesario: ${caldo.toFixed(2)} L<br>
        Concentración final: ${concentracion.toFixed(4)} ml/L<br><br>

        <hr><br>

        <strong>Tabla orientativa volumen de caldo:</strong><br><br>
        Lámina limpia → 300 L/ha<br>
        Vegetación media → 600 L/ha<br>
        Vegetación densa → 900 L/ha<br><br>

        <small>
        El volumen de caldo es criterio técnico de aplicación hidráulica terrestre.
        La etiqueta establece dosis de producto por hectárea.
        </small>
    `;
}

</script>

</body>
</html>
