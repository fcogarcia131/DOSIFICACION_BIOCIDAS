<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora de Dosis de Biocidas</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f8;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.container{
    background:white;
    padding:30px;
    border-radius:12px;
    box-shadow:0 4px 15px rgba(0,0,0,0.1);
    width:420px;
}
button{
    width:100%;
    padding:10px;
    border:none;
    border-radius:6px;
    background:#007bff;
    color:white;
    font-size:16px;
    cursor:pointer;
    margin-bottom:10px;
}
button:hover{ background:#0056b3; }
.boton-volver{ background:#6c757d; }
.boton-volver:hover{ background:#545b62; }
label{ font-weight:bold; }
select,input{
    width:100%;
    padding:8px;
    margin-top:5px;
    margin-bottom:15px;
    border-radius:6px;
    border:1px solid #ccc;
}
.resultado{
    margin-top:20px;
    padding:15px;
    background:#e9f7ef;
    border-radius:6px;
    font-weight:bold;
    text-align:center;
}
small{ font-weight:normal; }
</style>
</head>

<body>

<div class="container" id="menu">
    <h2>Calculadora de Dosis de Biocidas</h2>
    <button onclick="cargarAgua()">Desinfección de Agua (Legionella)</button>
    <button onclick="cargarInsecticidas()">Dosificación de Insecticidas</button>
    <button onclick="cargarVectobac()">Dosificación Vectobac 12 AS</button>
</div>

<div class="container" id="contenido" style="display:none;"></div>

<script>

function volverMenu(){
    document.getElementById("contenido").style.display="none";
    document.getElementById("menu").style.display="block";
}

/* ======================
   DESINFECCIÓN AGUA
====================== */

function cargarAgua(){
    document.getElementById("menu").style.display="none";
    document.getElementById("contenido").style.display="block";

    document.getElementById("contenido").innerHTML =
        '<h2>Desinfección de Agua</h2>' +
        '<label>Concentración producto (ppm):</label>' +
        '<input type="number" id="concentracion">' +
        '<label>Concentración deseada (ppm):</label>' +
        '<input type="number" id="dosis">' +
        '<label>Volumen sistema (L):</label>' +
        '<input type="number" id="volumen">' +
        '<button onclick="calcularAgua()">Calcular</button>' +
        '<button class="boton-volver" onclick="volverMenu()">Volver</button>' +
        '<div id="resultado" class="resultado" style="display:none;"></div>';
}

function calcularAgua(){
    var concentracion = parseFloat(document.getElementById("concentracion").value);
    var dosis = parseFloat(document.getElementById("dosis").value);
    var volumen = parseFloat(document.getElementById("volumen").value);

    if(isNaN(concentracion)||isNaN(dosis)||isNaN(volumen)){
        alert("Complete todos los campos");
        return;
    }

    var litros = (dosis*volumen)/concentracion;
    var ml = litros*1000;

    var resultado=document.getElementById("resultado");
    resultado.style.display="block";
    resultado.innerHTML=
        "Volumen a añadir:<br><br>"+
        litros.toFixed(4)+" L<br>"+
        ml.toFixed(2)+" mL";
}

/* ======================
   INSECTICIDAS
====================== */

function cargarInsecticidas(){
    document.getElementById("menu").style.display="none";
    document.getElementById("contenido").style.display="block";

    document.getElementById("contenido").innerHTML =
        '<h2>Insecticidas</h2>' +
        '<label>Concentración garrafa (%):</label>' +
        '<input type="number" id="concentracion">' +
        '<label>Dosis deseada (%):</label>' +
        '<input type="number" id="dosis">' +
        '<label>Volumen caldo (L):</label>' +
        '<input type="number" id="volumen">' +
        '<button onclick="calcularInsecticida()">Calcular</button>' +
        '<button class="boton-volver" onclick="volverMenu()">Volver</button>' +
        '<div id="resultado" class="resultado" style="display:none;"></div>';
}

function calcularInsecticida(){
    var concentracion=parseFloat(document.getElementById("concentracion").value);
    var dosis=parseFloat(document.getElementById("dosis").value);
    var volumen=parseFloat(document.getElementById("volumen").value);

    if(isNaN(concentracion)||isNaN(dosis)||isNaN(volumen)){
        alert("Complete todos los campos");
        return;
    }

    var litros=(dosis*volumen)/concentracion;
    var ml=litros*1000;

    var resultado=document.getElementById("resultado");
    resultado.style.display="block";
    resultado.innerHTML=
        "Volumen a añadir:<br><br>"+
        litros.toFixed(4)+" L<br>"+
        ml.toFixed(2)+" mL";
}

/* ======================
   VECTOBAC 12 AS
====================== */

function cargarVectobac(){
    document.getElementById("menu").style.display="none";
    document.getElementById("contenido").style.display="block";

    document.getElementById("contenido").innerHTML =
        '<h2>Vectobac 12 AS</h2>' +
        '<label>Tipo tratamiento:</label>' +
        '<select id="tipo" onchange="mostrarOpciones()">' +
            '<option value="superficie">Grandes superficies</option>' +
            '<option value="imbornales">Imbornales municipales</option>' +
        '</select>' +
        '<div id="zonaOpciones"></div>' +
        '<button onclick="calcularVectobac()">Calcular</button>' +
        '<button class="boton-volver" onclick="volverMenu()">Volver</button>' +
        '<div id="resultado" class="resultado" style="display:none;"></div>';

    mostrarOpciones();
}

function mostrarOpciones(){
    var tipo=document.getElementById("tipo").value;

    var html=
        '<label>Nivel infestación:</label>'+
        '<select id="nivel">'+
            '<option value="baja">Baja</option>'+
            '<option value="media">Media</option>'+
            '<option value="alta">Alta</option>'+
        '</select>'+
        '<label>Alta carga orgánica:</label>'+
        '<select id="organica">'+
            '<option value="false">No</option>'+
            '<option value="true">Sí</option>'+
        '</select>';

    if(tipo==="superficie"){
        html+=
            '<label>Superficie (m²):</label>'+
            '<input type="number" id="superficie">';
    }

    document.getElementById("zonaOpciones").innerHTML=html;
}

function calcularVectobac(){
    var tipo=document.getElementById("tipo").value;
    var nivel=document.getElementById("nivel").value;
    var organica=document.getElementById("organica").value==="true";

    var rangos={baja:0.08,media:0.125,alta:0.175};
    var dosis=rangos[nivel];

    if(organica) dosis+=0.02;
    if(dosis>0.25) dosis=0.25;

    var resultado=document.getElementById("resultado");
    resultado.style.display="block";

    if(tipo==="superficie"){
        var superficie=parseFloat(document.getElementById("superficie").value);
        if(isNaN(superficie)){alert("Introduzca superficie");return;}
        var producto=superficie*dosis;
        resultado.innerHTML=
            "Producto total: "+producto.toFixed(2)+" ml";
    }else{
        var productoPorImb=dosis*0.5;
        var imbornales=10;
        var productoTotal=productoPorImb*imbornales;

        resultado.innerHTML=
            "Añadir a mochila 5L: "+productoTotal.toFixed(2)+" ml<br>"+
            "Imbornales tratables: "+imbornales;
    }
}

</script>

</body>
</html>
