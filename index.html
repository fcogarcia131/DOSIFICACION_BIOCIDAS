<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Calculadora de Dosis de Biocidas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f8;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 420px;
        }
        label { font-weight: bold; }
        select, input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            margin-bottom: 15px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }
        button {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 6px;
            background-color: #007bff;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover { background-color: #0056b3; }
        .resultado {
            margin-top: 20px;
            padding: 15px;
            background-color: #e9f7ef;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
        }
        .boton-secundario {
            margin-top: 10px;
            background-color: #28a745;
        }
        .boton-volver {
            margin-top: 10px;
            background-color: #007bff;
        }
    </style>
</head>
<body>
    <div class="container" id="menu">
        <h2>Calculadora de Dosis de Biocidas</h2>
        <label>Seleccionar Biocida:</label>
        <button onclick="cargarDesinfeccion()">Desinfección de Agua (Legionella)</button>
        <button onclick="cargarInsecticidas()">Dosificación de Insecticidas</button>
        <button onclick="cargarVectobac()">Dosificación Vectobac 12 AS</button>
    </div>

    <div class="container" id="contenido" style="display:none;">
        <!-- Aquí se cargará dinámicamente el contenido -->
    </div>

    <script>
        function cargarDesinfeccion() {
            document.getElementById('menu').style.display = 'none';
            let html = `
                <h2>Desinfección de Agua (Legionella)</h2>
                <label>Seleccionar Biocida:</label>
                <select id="biocida">
                    <option value="576000">Peróxido Hidrógeno 48% (OX AGUA) - 576000 ppm</option>
                    <option value="187500">Hipoclorito Sódico 15% - 187500 ppm</option>
                    <option value="162500">Hipoclorito Sódico 13% - 162500 ppm</option>
                    <option value="300000">Peróxido Hidrógeno 25% (OX AIRE TORRES) - 300000 ppm</option>
                </select>
                <label>Concentración Deseada (ppm):</label>
                <input type="number" id="dosis" placeholder="Ej: 50">
                <label>Volumen del Sistema (L):</label>
                <input type="number" id="volumen" placeholder="Ej: 10000">
                <button onclick="calcularAgua()">Calcular</button>
                <button class="boton-volver" onclick="volverMenu()">← Volver</button>
                <div id="resultado" class="resultado" style="display:none;"></div>
            `;
            document.getElementById('contenido').style.display = 'block';
            document.getElementById('contenido').innerHTML = html;
        }

        function cargarInsecticidas() {
            document.getElementById('menu').style.display = 'none';
            let html = `
                <h2>Dosificación de Insecticidas</h2>
                <label>Nombre del insecticida:</label>
                <input type="text" id="nombre" placeholder="Ej: Cipermetrina">
                <label>Concentración en garrafa (%):</label>
                <input type="number" id="concentracion" placeholder="Ej: 10">
                <label>Volumen de caldo a preparar (L):</label>
                <input type="number" id="volumenCaldo" placeholder="Ej: 500">
                <label>Dosis deseada (%):</label>
                <input type="number" id="dosis" placeholder="Ej: 0.5">
                <button onclick="calcularInsecticida()">Calcular</button>
                <button class="boton-volver" onclick="volverMenu()">← Volver</button>
                <div id="resultado" class="resultado" style="display:none;"></div>
            `;
            document.getElementById('contenido').style.display = 'block';
            document.getElementById('contenido').innerHTML = html;
        }

        function cargarVectobac() {
            document.getElementById('menu').style.display = 'none';
            let html = `
                <h2>Dosificación Vectobac 12 AS</h2>
                <label>Superficie (m²):</label>
                <input type="number" id="supVectobac" placeholder="Ej: 1000">
                <label>Nivel infestación:</label>
                <select id="nivelVectobac">
                    <option value="baja">Baja</option>
                    <option value="media">Media</option>
                    <option value="alta">Alta</option>
                </select>
                <label>Tipo foco:</label>
                <select id="focoVectobac">
                    <option value="300">Lámina limpia</option>
                    <option value="600">Vegetación media</option>
                    <option value="900">Vegetación densa</option>
                </select>
                <label>¿Predominan L3-L4?</label>
                <select id="l3l4">
                    <option value="false">No</option>
                    <option value="true">Sí</option>
                </select>
                <label>¿Alta carga orgánica?</label>
                <select id="organica">
                    <option value="false">No</option>
                    <option value="true">Sí</option>
                </select>
                <button onclick="calcularVectobac()">Calcular</button>
                <button class="boton-volver" onclick="volverMenu()">← Volver</button>
                <div id="resultadoVectobac" class="resultado" style="display:none;"></div>
            `;
            document.getElementById('contenido').style.display = 'block';
            document.getElementById('contenido').innerHTML = html;
        }

        function volverMenu() {
            document.getElementById('contenido').style.display = 'none';
            document.getElementById('menu').style.display = 'flex';
        }

        function calcularAgua() {
            const concentracion = parseFloat(document.getElementById("biocida").value);
            const dosis = parseFloat(document.getElementById("dosis").value);
            const volumen = parseFloat(document.getElementById("volumen").value);

            if (isNaN(dosis) || isNaN(volumen)) {
                alert("Complete todos los campos.");
                return;
            }

            const volumenLitros = (dosis * volumen) / concentracion;
            const volumenML = volumenLitros * 1000;

            const resultado = document.getElementById("resultado");
            resultado.style.display = "block";
            resultado.innerHTML = `
                Volumen a añadir:<br><br>
                ${volumenLitros.toFixed(4)} L<br>
                ${volumenML.toFixed(2)} mL
            `;
        }

        function calcularInsecticida() {
            const nombre = document.getElementById("nombre").value;
            const concentracion = parseFloat(document.getElementById("concentracion").value);
            const volumen = parseFloat(document.getElementById("volumenCaldo").value);
            const dosis = parseFloat(document.getElementById("dosis").value);

            if (!nombre || isNaN(concentracion) || isNaN(volumen) || isNaN(dosis)) {
                alert("Complete todos los campos.");
                return;
            }

            const volumenLitros = (dosis * volumen) / concentracion;
            const volumenML = volumenLitros * 1000;

            const resultado = document.getElementById("resultado").innerHTML = `
                Producto: ${nombre}<br><br>
                Volumen a añadir:<br><br>
                ${volumenLitros.toFixed(4)} L<br>
                ${volumenML.toFixed(2)} mL
            `;
            document.getElementById("resultado").style.display = "block";
        }

     function calcularVectobac() {

    let superficie = parseFloat(document.getElementById("supVectobac").value);
    let nivel = document.getElementById("nivelVectobac").value;
    let volumenHa = parseFloat(document.getElementById("focoVectobac").value);
    let l3l4 = document.getElementById("l3l4").value === "true";
    let organica = document.getElementById("organica").value === "true";

    let rango = {
        baja: [0.06, 0.10],
        media: [0.10, 0.15],
        alta: [0.15, 0.20]
    };

    let dosis = (rango[nivel][0] + rango[nivel][1]) / 2;

    if (l3l4) dosis += 0.02;
    if (organica) dosis += 0.02;
    if (dosis > 0.25) dosis = 0.25;

    let producto = superficie * dosis;
    let caldo = superficie * (volumenHa / 10000);
    let concentracion = producto / caldo;

    const resultado = document.getElementById("resultadoVectobac");
    resultado.style.display = "block";
    resultado.innerHTML = `
        <strong>RESULTADO DEL TRATAMIENTO</strong><br><br>
        Dosis aplicada: ${dosis.toFixed(3)} ml/m² <br>
        Producto total: ${producto.toFixed(2)} ml <br>
        Caldo necesario: ${caldo.toFixed(2)} L <br>
        Concentración final: ${concentracion.toFixed(4)} ml/L <br><br>

        <hr>

        <strong>Criterio técnico de volumen de caldo</strong><br><br>

        Lámina limpia → 300 L/ha<br>
        Vegetación media → 600 L/ha<br>
        Vegetación densa / orgánica alta → 900 L/ha<br><br>

        <small>
        Volumen orientativo basado en práctica habitual de aplicación hidráulica terrestre 
        en tratamientos larvicidas con Bacillus thuringiensis israelensis. 
        La etiqueta establece dosis en L/ha de producto, no volumen de caldo.
        El volumen de aplicación se ajusta para garantizar distribución homogénea.
        </small>
    `;
}
