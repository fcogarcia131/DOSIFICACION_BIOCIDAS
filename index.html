<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora Profesional de Biocidas</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f8;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.container{
    background:white;
    padding:30px;
    border-radius:12px;
    box-shadow:0 4px 15px rgba(0,0,0,0.1);
    width:480px;
}
button{
    width:100%;
    padding:10px;
    border:none;
    border-radius:6px;
    background:#007bff;
    color:white;
    font-size:15px;
    cursor:pointer;
    margin-bottom:10px;
}
button:hover{ background:#0056b3; }
.boton-volver{ background:#6c757d; }
.boton-volver:hover{ background:#545b62; }
label{ font-weight:bold; }
select,input{
    width:100%;
    padding:8px;
    margin-top:5px;
    margin-bottom:15px;
    border-radius:6px;
    border:1px solid #ccc;
}
.resultado{
    margin-top:20px;
    padding:15px;
    background:#e9f7ef;
    border-radius:6px;
    font-size:14px;
}
hr{ margin:15px 0; }
</style>
</head>

<body>

<div class="container" id="menu">
    <h2>Calculadora Profesional de Biocidas</h2>
    <button onclick="cargarDesinfectantes()">Desinfección de Agua (ppm)</button>
    <button onclick="cargarInsecticidas()">Dosificación Insecticidas (%)</button>
    <button onclick="cargarVectobac()">Vectobac 12 AS</button>
</div>

<div class="container" id="contenido" style="display:none;"></div>

<script>

/* =========================
   UTILIDAD
========================= */

function volverMenu(){
    document.getElementById("contenido").style.display="none";
    document.getElementById("menu").style.display="block";
}

/* =========================
   DESINFECTANTES (ppm)
========================= */

function cargarDesinfectantes(){
    document.getElementById("menu").style.display="none";
    document.getElementById("contenido").style.display="block";

    document.getElementById("contenido").innerHTML =
    "<h3>Desinfección de Agua</h3>" +
    "<label>Concentración del producto (ppm):</label>" +
    "<input type='number' id='concentracion'>" +
    "<label>Concentración deseada (ppm):</label>" +
    "<input type='number' id='dosis'>" +
    "<label>Volumen del sistema (L):</label>" +
    "<input type='number' id='volumen'>" +
    "<button onclick='calcularDesinfectante()'>Calcular</button>" +
    "<button class='boton-volver' onclick='volverMenu()'>Volver</button>" +
    "<div id='resultado' class='resultado' style='display:none;'></div>";
}

function calcularDesinfectante(){
    var c = parseFloat(document.getElementById("concentracion").value);
    var d = parseFloat(document.getElementById("dosis").value);
    var v = parseFloat(document.getElementById("volumen").value);

    if(isNaN(c)||isNaN(d)||isNaN(v)){ alert("Complete todos los campos"); return; }

    var litros = (d*v)/c;
    var ml = litros*1000;

    var r=document.getElementById("resultado");
    r.style.display="block";
    r.innerHTML =
    "<strong>Cálculo:</strong><br>" +
    "Volumen = (ppm deseadas × Volumen sistema) / ppm producto<br><br>" +
    "(" + d + " × " + v + ") / " + c + " = " + litros.toFixed(4) + " L<br><br>" +
    "<strong>Añadir:</strong> " + ml.toFixed(2) + " mL";
}

/* =========================
   INSECTICIDAS (% etiqueta)
========================= */

function cargarInsecticidas(){
    document.getElementById("menu").style.display="none";
    document.getElementById("contenido").style.display="block";

    document.getElementById("contenido").innerHTML =
    "<h3>Dosificación Insecticidas</h3>" +
    "<label>Dosis según etiqueta (% caldo):</label>" +
    "<input type='number' id='dosis'>" +
    "<label>Volumen de caldo a preparar (L):</label>" +
    "<input type='number' id='volumen'>" +
    "<button onclick='calcularInsecticida()'>Calcular</button>" +
    "<button class='boton-volver' onclick='volverMenu()'>Volver</button>" +
    "<div id='resultado' class='resultado' style='display:none;'></div>";
}

function calcularInsecticida(){
    var d = parseFloat(document.getElementById("dosis").value);
    var v = parseFloat(document.getElementById("volumen").value);

    if(isNaN(d)||isNaN(v)){ alert("Complete todos los campos"); return; }

    var litros = (d/100)*v;
    var ml = litros*1000;

    var r=document.getElementById("resultado");
    r.style.display="block";
    r.innerHTML =
    "<strong>Cálculo:</strong><br>" +
    "Volumen producto = (Dosis % / 100) × Volumen caldo<br><br>" +
    "(" + d + " / 100) × " + v + " = " + litros.toFixed(4) + " L<br><br>" +
    "<strong>Añadir:</strong> " + ml.toFixed(2) + " mL";
}

/* =========================
   VECTOBAC 12 AS
========================= */

function cargarVectobac(){
    document.getElementById("menu").style.display="none";
    document.getElementById("contenido").style.display="block";

    document.getElementById("contenido").innerHTML =
    "<h3>Vectobac 12 AS</h3>" +
    "<label>Tipo tratamiento:</label>" +
    "<select id='tipo' onchange='mostrarOpciones()'>" +
        "<option value='superficie'>Grandes superficies</option>" +
        "<option value='imbornales'>Imbornales municipales</option>" +
    "</select>" +
    "<div id='zonaOpciones'></div>" +
    "<button onclick='calcularVectobac()'>Calcular</button>" +
    "<button class='boton-volver' onclick='volverMenu()'>Volver</button>" +
    "<div id='resultado' class='resultado' style='display:none;'></div>";

    mostrarOpciones();
}

function mostrarOpciones(){
    var tipo=document.getElementById("tipo").value;

    var html=
    "<label>Nivel infestación:</label>" +
    "<select id='nivel'>" +
        "<option value='baja'>Baja</option>" +
        "<option value='media'>Media</option>" +
        "<option value='alta'>Alta</option>" +
    "</select>" +
    "<label>Alta carga orgánica:</label>" +
    "<select id='organica'>" +
        "<option value='false'>No</option>" +
        "<option value='true'>Sí</option>" +
    "</select>";

    if(tipo==="superficie"){
        html += "<label>Superficie (m²):</label><input type='number' id='superficie'>";
    } else {
        html +=
        "<label>Tiempo pulverización (seg):</label><input type='number' id='tiempo'>" +
        "<label>Caudal mochila (ml/min):</label><input type='number' id='caudal'>";
    }

    document.getElementById("zonaOpciones").innerHTML=html;
}

function calcularVectobac(){

    var tipo=document.getElementById("tipo").value;
    var nivel=document.getElementById("nivel").value;
    var organica=document.getElementById("organica").value==="true";

    var rangos={baja:0.08,media:0.125,alta:0.175};
    var dosis=rangos[nivel];
    if(organica) dosis+=0.02;
    if(dosis>0.25) dosis=0.25;

    var r=document.getElementById("resultado");
    r.style.display="block";

    if(tipo==="superficie"){

        var s=parseFloat(document.getElementById("superficie").value);
        if(isNaN(s)){alert("Introduzca superficie");return;}

        var producto=s*dosis;

        r.innerHTML=
        "<strong>Cálculo:</strong><br>" +
        "Producto = Superficie × Dosis<br><br>" +
        s + " × " + dosis.toFixed(3) + " = " + producto.toFixed(2) + " ml<br><br>" +
        "<strong>Añadir:</strong> " + producto.toFixed(2) + " ml";

    } else {

        var tiempo=parseFloat(document.getElementById("tiempo").value);
        var caudal=parseFloat(document.getElementById("caudal").value);

        if(isNaN(tiempo)||isNaN(caudal)){ alert("Complete todos los campos"); return; }

     var superficieImb = 0.5;
var btiImb = dosis * superficieImb;

var mlSeg = caudal / 60;
var volumenAplicado = mlSeg * tiempo;

var concentracion = btiImb / volumenAplicado;
var productoTotal = 5000 * concentracion;

var imbornales = Math.floor(5000 / volumenAplicado);

r.innerHTML =
"<strong>Cálculo hidráulico:</strong><br><br>" +

"BTI por imbornal = Dosis × 0.5 m²<br>" +
dosis.toFixed(3) + " × 0.5 = " +
btiImb.toFixed(4) + " ml<br><br>" +

"Volumen aplicado por imbornal = (Caudal/60) × Tiempo<br>" +
"(" + caudal + "/60) × " + tiempo + " = " +
volumenAplicado.toFixed(2) + " ml<br><br>" +

"Concentración necesaria = BTI / Volumen aplicado<br>" +
btiImb.toFixed(4) + " / " +
volumenAplicado.toFixed(2) + " = " +
concentracion.toFixed(6) + " ml/ml<br><br>" +

"<strong>Producto a añadir en 5 L:</strong><br>" +
"5000 × " + concentracion.toFixed(6) +
" = " + productoTotal.toFixed(2) + " ml<br><br>" +

"<strong>Imbornales tratables con 5 L:</strong><br>" +
imbornales + " unidades";
    }
}

</script>

</body>
</html>
